---
import { type CollectionEntry, getCollection } from 'astro:content';
import BlogPost from '../../../layouts/BlogPost.astro';
import { render } from 'astro:content';
import Comments from "../../../components/Comments.astro";

export async function getStaticPaths() {
	const posts = await getCollection('blog');

	// 英語記事のみをフィルタリング（en/で始まるもの）
	const enPosts = posts.filter((post) => post.id.startsWith('en/'));

	return enPosts.map((post) => {
		const slug = post.id.replace('en/', '');
		return {
			params: { slug },
			props: { post },
		};
	});
}

interface Props {
	post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { Content } = await render(post);
const articleSlug = post.id.replace('en/', '');
---

<BlogPost {...post.data} slug={articleSlug} lang="en" hasTranslation={true}>
	<Content />
	<Comments lang="en" />
</BlogPost>
